name: CLA validation

on:
  issue_comment:
    types: [created]
  pull_request_target:
    types: [opened, synchronize, reopened]

permissions:
  actions: write
  contents: read 
  pull-requests: write
  statuses: write

jobs:
  CLAAssistant:
    uses: ./.github/workflows/cla.yml
    secrets:
      CLA_APP_ID: ${{ secrets.SILABSIN_CLA_BOT_APP_IDD }}
      CLA_APP_PRIVATE_KEY: ${{ secrets.SILABSIN_CLA_BOT_APP_PRIVATE_KEY }}
    with:
      remote_org: "SiliconLabsInternal"
      remote_repo: contributor-license-agreements
      signatures_path: cla_signatures_db.json
      document_url: https://github.com/SiliconLabsSoftware/agreements-and-guidelines/blob/main/contributor_license_agreement.md
      allowlist: silabs-*,bot*
      branch: cla-database
      runner: ubuntu-latest